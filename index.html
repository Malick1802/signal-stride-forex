<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>signal-stride-forex</title>
    <meta name="description" content="Lovable Generated Project" />
    <meta name="author" content="Lovable" />

    <meta property="og:title" content="signal-stride-forex" />
    <meta property="og:description" content="Lovable Generated Project" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@lovable_dev" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
  </head>

  <body>
    <div id="root"></div>
    
    <!-- EMERGENCY: Clear all caches and bypass everything -->
    <script type="module">
      console.log('🚨 EMERGENCY CACHE CLEARING STARTED');
      
      // 1. Unregister all service workers
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations().then(registrations => {
          registrations.forEach(registration => {
            console.log('🚨 Unregistering service worker:', registration);
            registration.unregister();
          });
        });
      }
      
      // 2. Clear all caches
      if ('caches' in window) {
        caches.keys().then(cacheNames => {
          cacheNames.forEach(cacheName => {
            console.log('🚨 Deleting cache:', cacheName);
            caches.delete(cacheName);
          });
        });
      }
      
      // 3. Add cache-busting timestamp to CDN imports
      const timestamp = Date.now();
      console.log('🚨 Loading React with timestamp:', timestamp);
      
      // Load React directly from CDN with cache busting (using .then to avoid top-level await)
      Promise.all([
        import(`https://esm.sh/react@18.2.0?t=${timestamp}`),
        import(`https://esm.sh/react-dom@18.2.0?t=${timestamp}`)
      ]).then(([React, ReactDOM]) => {
      
      console.log('🚨 React modules loaded:', { React, ReactDOM });
      
      const { useState, createElement } = React.default;
      const { createRoot } = ReactDOM.default;
      
      function EmergencyApp() {
        console.log('🚨 Emergency app rendering...');
        
        try {
          const [working, setWorking] = useState(true);
          const [clickCount, setClickCount] = useState(0);
          
          return createElement('div', {
            style: {
              padding: '50px',
              textAlign: 'center',
              fontFamily: 'system-ui',
              backgroundColor: working ? '#d4edda' : '#f8d7da',
              color: working ? '#155724' : '#721c24',
              border: `3px solid ${working ? '#c3e6cb' : '#f5c6cb'}`,
              borderRadius: '10px',
              margin: '20px auto',
              maxWidth: '600px'
            }
          }, [
            createElement('h1', { key: 'title' }, 
              '🚨 EMERGENCY BYPASS SUCCESS!'
            ),
            createElement('p', { key: 'desc' }, 
              'All caches cleared, service workers disabled!'
            ),
            createElement('p', { key: 'status' }, 
              `React useState: ${working ? 'WORKING ✅' : 'BROKEN ❌'}`
            ),
            createElement('p', { key: 'count' }, 
              `Button clicks: ${clickCount}`
            ),
            createElement('button', {
              key: 'btn',
              onClick: () => {
                setWorking(!working);
                setClickCount(c => c + 1);
                console.log('🚨 Button clicked, new state:', !working);
              },
              style: {
                padding: '15px 30px',
                backgroundColor: '#007bff',
                color: 'white',
                border: 'none',
                borderRadius: '5px',
                cursor: 'pointer',
                fontSize: '16px',
                fontWeight: 'bold',
                margin: '10px'
              }
            }, 'Toggle & Count'),
            createElement('p', { key: 'timestamp' }, 
              `Loaded at: ${new Date().toLocaleTimeString()}`
            )
          ]);
        } catch (error) {
          console.error('🚨 Emergency app error:', error);
          return createElement('div', {
            style: { color: 'red', padding: '20px', textAlign: 'center' }
          }, `Emergency Error: ${error.message}`);
        }
      }
      
      try {
        const root = createRoot(document.getElementById('root'));
        root.render(createElement(EmergencyApp));
        console.log('🚨 Emergency app loaded successfully!');
      } catch (error) {
        console.error('🚨 Emergency app failed:', error);
        document.getElementById('root').innerHTML = `
          <div style="color: red; padding: 20px; text-align: center; font-family: Arial;">
            <h1>🚨 Emergency App Failed</h1>
            <p>Error: ${error.message}</p>
            <p>Check console for details.</p>
          </div>
        `;
      }
      }).catch(error => {
        console.error('🚨 Failed to load React modules:', error);
        document.getElementById('root').innerHTML = `
          <div style="color: red; padding: 20px; text-align: center; font-family: Arial;">
            <h1>🚨 Failed to Load React</h1>
            <p>Error: ${error.message}</p>
          </div>
        `;
      });
    </script>
    
    <!-- ALL VITE AND BUNDLING COMPLETELY DISABLED -->
    <!-- <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script> -->
    <!-- <script type="module" src="/src/main.tsx"></script> -->
  </body>
</html>
